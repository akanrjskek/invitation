<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>우리 결혼합니다 | 모바일 청첩장</title>

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&display=swap"
        rel="stylesheet">

    <!-- Naver Map -->
    <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=xobgoisfw3"></script>

    <style>
        :root {
            --br: 20px;
        }

        * {
            box-sizing: border-box
        }

        body {
            margin: 0;
            font-family: Pretendard, system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', sans-serif;
            background:
                radial-gradient(900px 520px at 18% 10%, rgba(255, 214, 130, .22), transparent 60%),
                radial-gradient(900px 520px at 90% 18%, rgba(255, 132, 189, .16), transparent 60%),
                radial-gradient(800px 520px at 65% 95%, rgba(120, 170, 255, .12), transparent 60%),
                linear-gradient(180deg, #0b0f1a 0%, #0f172a 45%, #0b1020 100%);
            color: #e5e7eb;
        }

        .wrap {
            max-width: 680px;
            margin: 0 auto;
            padding: 16px 16px 64px;
        }

        .card {
            margin: 72px 0;
            padding: 24px;
            border-radius: var(--br);
            background: rgba(255, 255, 255, .06);
            border: 1px solid rgba(255, 215, 150, .22);
            box-shadow: 0 18px 45px rgba(0, 0, 0, .35), inset 0 1px 0 rgba(255, 255, 255, .08);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }

        /* 섹션 타이틀 */
        .section-title {
            color: rgba(255, 255, 255, .92);
            letter-spacing: .02em;
            position: relative;
            padding-bottom: 14px;
            margin-bottom: 24px;
            text-align: center;
            font-weight: 700;
        }

        .section-title::after {
            content: "";
            position: absolute;
            left: 0;
            right: 0;
            bottom: 0;
            height: 1px;
            background: linear-gradient(90deg,
                    rgba(255, 215, 150, .0),
                    rgba(255, 215, 150, .55),
                    rgba(255, 215, 150, .0));
        }

        .section-title::before {
            content: "◆";
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            bottom: -9px;
            font-size: 12px;
            color: rgba(255, 215, 150, .8);
            text-shadow: 0 6px 18px rgba(255, 215, 150, .25);
        }

        .muted {
            color: rgba(229, 231, 235, .78);
        }

        /* 히어로 */
        .hero {
            position: relative;
            overflow: hidden;
            text-align: center;
            padding: 64px 20px;
            border-radius: var(--br);
            min-height: 520px;
            background-image: url("images/picture3.jpeg");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            border: 1px solid rgba(255, 215, 150, .26);
            box-shadow: 0 24px 60px rgba(0, 0, 0, .45), inset 0 1px 0 rgba(255, 255, 255, .10);
        }

        .hero::before {
            content: "";
            position: absolute;
            inset: 0;
            background:
                radial-gradient(900px 520px at 20% 15%, rgba(255, 214, 130, .20), transparent 60%),
                radial-gradient(900px 520px at 85% 25%, rgba(255, 132, 189, .14), transparent 60%),
                linear-gradient(180deg, rgba(0, 0, 0, .52) 0%, rgba(0, 0, 0, .28) 45%, rgba(0, 0, 0, .62) 100%);
            z-index: 0;
        }

        .hero::after {
            content: "";
            position: absolute;
            inset: 0;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='140' height='140' filter='url(%23n)' opacity='.18'/%3E%3C/svg%3E");
            mix-blend-mode: overlay;
            opacity: .14;
            pointer-events: none;
            z-index: 0;
        }

        .hero>* {
            position: relative;
            z-index: 1;
        }

        .wedding-subtitle {
            font-family: "Playfair Display", serif;
            color: rgba(255, 255, 255, .92);
            text-shadow: 0 10px 30px rgba(0, 0, 0, .55);
        }

        .wedding-subtitle.en {
            font-size: 14px;
            letter-spacing: .42em;
            text-transform: uppercase;
            opacity: .92;
            margin-bottom: 10px;
        }

        .wedding-subtitle.kr {
            font-size: 22px;
            letter-spacing: .08em;
            font-weight: 600;
            margin: 8px 0 12px;
        }

        .wedding-subtitle.meta {
            font-size: 14px;
            letter-spacing: .10em;
            font-weight: 400;
            opacity: .92;
            margin-top: 6px;
        }

        @media (max-width:520px) {
            .hero {
                min-height: 440px;
            }

            .wedding-subtitle.kr {
                font-size: 20px;
            }

            .wedding-subtitle.meta {
                font-size: 13px;
            }
        }

        /* 예식 안내 카드 내부 */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .card .card {
            padding: 16px;
            border-radius: 16px;
            background: rgba(255, 255, 255, .08);
            border: 1px solid rgba(255, 215, 150, .18);
            box-shadow: 0 12px 28px rgba(0, 0, 0, .25), inset 0 1px 0 rgba(255, 255, 255, .08);
        }

        /* 버튼 */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px;
            border-radius: 12px;
            text-decoration: none;
            border: 1px solid rgba(255, 215, 150, .28);
            background: rgba(255, 255, 255, .06);
            color: rgba(255, 255, 255, .92);
            box-shadow: 0 12px 26px rgba(0, 0, 0, .25);
        }

        .btn:active {
            transform: scale(.99);
        }

        .btn.btn-gold {
            border: 0;
            color: #111827;
            background: linear-gradient(135deg, #ffd98a 0%, #ffb6d5 45%, #c7b6ff 100%);
            box-shadow: 0 18px 38px rgba(255, 214, 130, .12), 0 18px 48px rgba(0, 0, 0, .35);
        }

        /* 축하 연락처 */
        .contact-2col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 18px;
        }

        .contact-col {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .contact-line {
            display: grid;
            grid-template-columns: 48px 1fr auto;
            align-items: center;
            gap: 8px;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 215, 150, .15);
        }

        .contact-line:last-child {
            border-bottom: none;
        }

        .contact-line.main {
            font-weight: 600;
        }

        .contact-line .role {
            font-size: 12px;
            letter-spacing: .14em;
            color: rgba(255, 215, 150, .9);
        }

        .contact-line .name {
            font-size: 15px;
            color: rgba(255, 255, 255, .95);
        }

        .contact-line .actions {
            display: flex;
            gap: 6px;
        }

        .contact-line .actions a {
            font-size: 12px;
            padding: 5px 9px;
            border-radius: 999px;
            text-decoration: none;
            color: #111827;
            background: linear-gradient(135deg, #ffd98a, #ffb6d5, #c7b6ff);
            box-shadow: 0 6px 14px rgba(0, 0, 0, .25);
        }

        @media (max-width:520px) {
            .contact-2col {
                grid-template-columns: 1fr;
            }
        }

        /* 계좌 */
        .account-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px;
        }

        .account-box {
            padding: 14px;
            border-radius: 16px;
            background: rgba(255, 255, 255, .06);
            border: 1px solid rgba(255, 215, 150, .18);
        }

        .account-role {
            font-size: 12px;
            letter-spacing: .16em;
            color: rgba(255, 215, 150, .9);
            margin-bottom: 8px;
            font-weight: 600;
        }

        .row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
        }

        .account-number {
            font-size: 15px;
            font-weight: 800;
        }

        .account-owner {
            font-size: 13px;
        }

        .copy {
            border: 0;
            padding: 10px 12px;
            border-radius: 12px;
            cursor: pointer;
            background: linear-gradient(135deg, #ffd98a, #ffb6d5, #c7b6ff);
            color: #111827;
            box-shadow: 0 14px 28px rgba(0, 0, 0, .25);
            font-weight: 700;
            white-space: nowrap;
        }

        .copy:active {
            transform: scale(.98);
        }

        @media (max-width:520px) {
            .account-grid {
                grid-template-columns: 1fr;
            }
        }

        /* 지도 */
        .map-box {
            height: 360px;
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid rgba(255, 215, 150, .18);
            box-shadow: 0 18px 40px rgba(0, 0, 0, .32);
            background: rgba(255, 255, 255, .04);
        }

        .fallback-iframe {
            border: 0;
            width: 100%;
            height: 100%;
        }

        /* ===== 갤러리 그리드 ===== */
        .gallery-grid {
            margin-top: 12px;
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 10px;
        }

        @media (min-width:560px) {
            .gallery-grid {
                grid-template-columns: repeat(4, minmax(0, 1fr));
            }
        }

        @media (max-width:520px) {
            .gallery-grid {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }

        .g-item {
            padding: 0;
            border: 0;
            background: transparent;
            border-radius: 14px;
            overflow: hidden;
            cursor: pointer;
            border: 1px solid rgba(255, 215, 150, .16);
            box-shadow: 0 14px 26px rgba(0, 0, 0, .28);
        }

        .g-item img {
            width: 100%;
            height: 160px;
            display: block;
            object-fit: cover;
            transition: transform .18s ease;
        }

        .g-item:active img {
            transform: scale(.98);
        }

        /* ===== 라이트박스(확대) ===== */
        .lightbox {
            position: fixed;
            inset: 0;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 18px;
            background: rgba(0, 0, 0, .78);
            z-index: 9999;
        }

        .lightbox.open {
            display: flex;
        }

        .lb-stage {
            position: relative;
            width: min(92vw, 820px);
            height: min(82vh, 680px);
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: auto;
            /* ✅ 클릭이 stage/img로 정상 인식 */
            z-index: 10000;
        }


        .lb-img {
            max-width: 100%;
            max-height: 100%;
            border-radius: 18px;
            object-fit: contain;
            box-shadow: 0 30px 80px rgba(0, 0, 0, .6);
            border: 1px solid rgba(255, 215, 150, .18);
            user-select: none;
            -webkit-user-drag: none;
            pointer-events: auto;
        }

        .lb-counter {
            position: absolute;
            left: 12px;
            bottom: 12px;
            padding: 6px 10px;
            border-radius: 999px;
            background: rgba(255, 255, 255, .10);
            border: 1px solid rgba(255, 215, 150, .18);
            color: rgba(255, 255, 255, .92);
            font-size: 12px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            pointer-events: auto;
        }

        .lb-btn {
            position: fixed;
            border: 0;
            width: 46px;
            height: 46px;
            border-radius: 999px;
            background: rgba(255, 255, 255, .10);
            color: rgba(255, 255, 255, .95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 150, .18);
            box-shadow: 0 18px 40px rgba(0, 0, 0, .35);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10001;
            pointer-events: auto;
            cursor: pointer;
        }

        .lb-btn:active {
            transform: scale(.96);
        }

        .lb-close {
            top: 14px;
            right: 14px;
        }

        .lb-prev {
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
        }

        .lb-next {
            right: 14px;
            top: 50%;
            transform: translateY(-50%);
        }

        @media (max-width:520px) {
            .lb-prev {
                left: 10px;
            }

            .lb-next {
                right: 10px;
            }
        }
    </style>
</head>

<body>
    <div class="wrap">

        <!-- 히어로 -->
        <div class="hero card">
            <div class="wedding-subtitle en">WE ARE GETTING MARRIED</div>
            <div class="wedding-subtitle kr">영훈 · 누리</div>
            <div class="wedding-subtitle meta">2026년 3월 8일 일요일 오후 3:30</div>
            <div class="wedding-subtitle meta">명동 라루체, 5층 그레이스홀</div>
        </div>

        <!-- 인사말 -->
        <section class="card" id="greeting">
            <div class="section-title">결혼합니다</div>
            <p class="muted" style="line-height:1.85; text-align:center;">
                서로에게 기대어 평생을 함께 걸어가려 합니다.<br />
                따뜻한 마음으로 축복해 주세요.
            </p>
        </section>

        <!-- 예식 안내 -->
        <section class="card">
            <div class="section-title">예식 안내</div>
            <div class="grid-2">
                <div class="card">
                    <div class="muted">일시</div>
                    <div style="font-size:14px;font-weight:800">2026년 3월 8일 일요일 오후 3시 30분</div>
                </div>
                <div class="card">
                    <div class="muted">장소</div>
                    <div style="font-size:14px;font-weight:800">명동 라루체</div>
                    <div class="muted" style="font-size:14px">서울 중구 퇴계로 18길 46 (남산동1가 13-6)</div>
                </div>
            </div>
        </section>

        <!-- 축하 연락처 -->
        <section class="card" id="congrats-contacts">
            <div class="section-title">축하 연락처</div>

            <div class="contact-2col">
                <!-- 신랑측 -->
                <div class="contact-col">
                    <div class="contact-line main">
                        <span class="role">신랑</span>
                        <span class="name">원영훈</span>
                        <span class="actions">
                            <a href="tel:010-7300-5571" data-confirm="신랑에게 전화를 걸까요?">전화</a>
                            <a href="sms:010-7300-5571" data-confirm="신랑에게 문자를 보낼까요?">문자</a>
                        </span>
                    </div>

                    <div class="contact-line">
                        <span class="role">혼주</span>
                        <span class="name">원돌석</span>
                        <span class="actions">
                            <a href="tel:010-3576-9614" data-confirm="신랑 아버지께 전화를 걸까요?">전화</a>
                            <a href="sms:010-3576-9614" data-confirm="신랑 아버지께 문자를 보낼까요?">문자</a>
                        </span>
                    </div>

                    <div class="contact-line">
                        <span class="role">혼주</span>
                        <span class="name">황정숙</span>
                        <span class="actions">
                            <a href="tel:010-8468-5571" data-confirm="신랑 어머니께 전화를 걸까요?">전화</a>
                            <a href="sms:010-8468-5571" data-confirm="신랑 어머니께 문자를 보낼까요?">문자</a>
                        </span>
                    </div>
                </div>

                <!-- 신부측 -->
                <div class="contact-col">
                    <div class="contact-line main">
                        <span class="role">신부</span>
                        <span class="name">강누리</span>
                        <span class="actions">
                            <a href="tel:010-9777-4111" data-confirm="신부에게 전화를 걸까요?">전화</a>
                            <a href="sms:010-9777-4111" data-confirm="신부에게 문자를 보낼까요?">문자</a>
                        </span>
                    </div>

                    <div class="contact-line">
                        <span class="role">혼주</span>
                        <span class="name">강용택</span>
                        <span class="actions">
                            <a href="tel:010-3681-1797" data-confirm="신부 아버지께 전화를 걸까요?">전화</a>
                            <a href="sms:010-3681-1797" data-confirm="신부 아버지께 문자를 보낼까요?">문자</a>
                        </span>
                    </div>

                    <div class="contact-line">
                        <span class="role">혼주</span>
                        <span class="name">백순여</span>
                        <span class="actions">
                            <a href="tel:010-8564-1797" data-confirm="신부 어머니께 전화를 걸까요?">전화</a>
                            <a href="sms:010-8564-1797" data-confirm="신부 어머니께 문자를 보낼까요?">문자</a>
                        </span>
                    </div>
                </div>
            </div>

            <p class="muted" style="margin-top:12px;font-size:12px; text-align:center;">
                * 전화 또는 문자 버튼을 누르면 해당 앱으로 연결됩니다.
            </p>
        </section>

        <!-- 갤러리 -->
        <section class="card" id="gallery">
            <div class="section-title">우리 사진</div>
            <div class="gallery-grid" id="gallery-grid"></div>

            <!-- 라이트박스 -->
            <div class="lightbox" id="lightbox" aria-hidden="true">
                <button class="lb-btn lb-close" type="button"><i class="ri-close-line"></i></button>
                <button class="lb-btn lb-prev" type="button"><i class="ri-arrow-left-s-line"></i></button>
                <button class="lb-btn lb-next" type="button"><i class="ri-arrow-right-s-line"></i></button>

                <div class="lb-stage">
                    <img class="lb-img" id="lb-img" alt="">
                    <div class="lb-counter" id="lb-counter"></div>
                </div>
            </div>
        </section>

        <!-- 오시는 길 -->
        <section class="card">
            <div class="section-title">오시는 길 · 네이버 지도</div>
            <div id="map" class="map-box"></div>
            <div class="grid-2" style="margin-top:12px">
                <a class="btn btn-gold" id="naver-route" target="_blank"><i class="ri-map-pin-2-line"></i>네이버 길찾기</a>
                <a class="btn btn-gold" id="naver-place" target="_blank"><i class="ri-external-link-line"></i>네이버 지도
                    열기</a>
            </div>
            <div id="map-fallback" class="map-box" style="display:none; margin-top:12px;">
                <iframe class="fallback-iframe"
                    src="https://map.naver.com/v5/search/%EB%AA%85%EB%8F%99%20%EB%9D%BC%EB%A3%A8%EC%B2%B4"
                    allowfullscreen></iframe>
            </div>
        </section>

        <!-- 마음 전하실 곳 -->
        <section class="card">
            <div class="section-title">마음 전하실 곳</div>

            <div class="account-grid">
                <div class="account-box">
                    <div class="account-role">신랑측</div>
                    <div class="row">
                        <div>
                            <div class="account-number">케이뱅크 100-136-885402</div>
                            <div class="muted account-owner">예금주: 원영훈</div>
                        </div>
                        <button class="copy" data-copy="케이뱅크 100-136-885402 예금주 원영훈">
                            <i class="ri-file-copy-2-line"></i> 복사
                        </button>
                    </div>
                </div>

                <div class="account-box">
                    <div class="account-role">신부측</div>
                    <div class="row">
                        <div>
                            <div class="account-number">케이뱅크 100-224-926646</div>
                            <div class="muted account-owner">예금주: 강누리</div>
                        </div>
                        <button class="copy" data-copy="케이뱅크 100-224-926646 예금주 강누리">
                            <i class="ri-file-copy-2-line"></i> 복사
                        </button>
                    </div>
                </div>
            </div>

            <p class="muted" style="margin-top:12px;font-size:12px; text-align:center;">
                * 복사 버튼을 누르면 계좌번호가 클립보드에 저장됩니다.
            </p>
        </section>

    </div>

    <script>
        const WEDDING = {
            lat: 37.558992680643,
            lng: 126.98463318791,
            placeName: '명동 라루체',
            placeAddress: '서울 중구 퇴계로 18길 46 (남산동1가 13-6)'
        };

        function initMap() {
            const mapEl = document.getElementById('map');
            const fb = document.getElementById('map-fallback');
            const hasNaver = typeof naver !== 'undefined' && naver.maps && naver.maps.Map;

            if (!hasNaver) {
                mapEl.style.display = 'none';
                fb.style.display = 'block';
                return;
            }

            const center = new naver.maps.LatLng(WEDDING.lat, WEDDING.lng);
            const map = new naver.maps.Map('map', {
                center,
                zoom: 16,
                scaleControl: false,
                logoControl: true,
                mapDataControl: false,
                tileTransition: true
            });

            const marker = new naver.maps.Marker({
                position: center,
                map,
                icon: {
                    content: '<div style="width:22px;height:22px;border-radius:50%;background:#111827;border:3px solid #fff;box-shadow:0 6px 18px rgba(0,0,0,.2)"></div>',
                    anchor: new naver.maps.Point(11, 22)
                }
            });

            const info = `<div style="padding:10px 12px;border-radius:10px;background:#fff;box-shadow:0 6px 20px rgba(0,0,0,.12);font-size:14px;font-weight:700">
          ${WEDDING.placeName}
          <div style="font-size:12px;color:#6b7280;font-weight:500;margin-top:4px">${WEDDING.placeAddress}</div>
        </div>`;

            const infowindow = new naver.maps.InfoWindow({ content: info, borderColor: '#fff', anchorSize: new naver.maps.Size(0, 0) });
            infowindow.open(map, marker);

            document.getElementById('naver-route').href = `https://map.naver.com/v5/directions/-/-/${WEDDING.lat},${WEDDING.lng}`;
            document.getElementById('naver-place').href = `https://map.naver.com/v5/search/${encodeURIComponent(WEDDING.placeName)}`;
        }

        function initCopyButtons() {
            document.querySelectorAll('.copy').forEach(btn => btn.addEventListener('click', async (e) => {
                const text = e.currentTarget.dataset.copy;
                try {
                    await navigator.clipboard.writeText(text);
                    alert('계좌 정보가 복사되었습니다.');
                } catch {
                    prompt('복사에 실패했습니다. 아래 내용을 직접 복사해 주세요.', text);
                }
            }));
        }

        function initCongratsContacts2Col() {
            document.querySelectorAll('#congrats-contacts a[data-confirm]').forEach(a => {
                a.addEventListener('click', e => {
                    if (!confirm(a.dataset.confirm)) e.preventDefault();
                });
            });
        }

        function initGalleryAuto() {
            const GALLERY = {
                dir: 'images/',
                prefix: 'picture',
                start: 1,
                count: 5,
                ext: ['jpeg', 'jpg', 'png', 'webp']
            };

            const grid = document.getElementById('gallery-grid');
            const lb = document.getElementById('lightbox');
            const lbImg = document.getElementById('lb-img');
            const lbCounter = document.getElementById('lb-counter');
            const btnClose = lb.querySelector('.lb-close');
            const btnPrev = lb.querySelector('.lb-prev');
            const btnNext = lb.querySelector('.lb-next');

            let items = [];
            let index = 0;

            let scrollY = 0;
            const lock = () => {
                scrollY = window.scrollY;
                document.body.style.position = 'fixed';
                document.body.style.top = `-${scrollY}px`;
                document.body.style.width = '100%';
            };
            const unlock = () => {
                document.body.style.position = '';
                document.body.style.top = '';
                window.scrollTo(0, scrollY);
            };

            const show = (i) => {
                index = (i + items.length) % items.length;
                lbImg.src = items[index];
                lbCounter.textContent = `${index + 1} / ${items.length}`;
            };

            const open = (i) => {
                show(i);
                lb.classList.add('open');
                lock();
            };

            const close = () => {
                lb.classList.remove('open');
                lbImg.src = '';
                unlock();
            };

            btnClose.addEventListener('click', (e) => { e.stopPropagation(); close(); });
            btnPrev.addEventListener('click', (e) => { e.stopPropagation(); show(index - 1); });
            btnNext.addEventListener('click', (e) => { e.stopPropagation(); show(index + 1); });
            /*lb.addEventListener('click', e => { if (e.target === lb) close(); });*/

            let sx = 0;
            lbImg.addEventListener('touchstart', e => sx = e.touches[0].clientX, { passive: true });
            lbImg.addEventListener('touchend', e => {
                const dx = e.changedTouches[0].clientX - sx;
                if (Math.abs(dx) > 40) dx > 0 ? show(index - 1) : show(index + 1);
            }, { passive: true });

            document.addEventListener('keydown', (e) => {
                if (!lb.classList.contains('open')) return;
                if (e.key === 'Escape') close();
                if (e.key === 'ArrowLeft') show(index - 1);
                if (e.key === 'ArrowRight') show(index + 1);
            });

            const probe = (n) => new Promise(res => {
                let i = 0;
                const img = new Image();
                const next = () => {
                    if (i >= GALLERY.ext.length) return res(null);
                    img.src = `${GALLERY.dir}${GALLERY.prefix}${n}.${GALLERY.ext[i++]}`;
                };
                img.onload = () => res(img.src);
                img.onerror = next;
                next();
            });

            const makeThumb = (src, i) => {
                const b = document.createElement('button');
                b.className = 'g-item';
                b.type = 'button';
                b.innerHTML = `<img src="${src}" loading="lazy" alt="photo ${i + 1}">`;
                b.addEventListener('click', () => open(i));
                return b;
            };

            (async () => {
                for (let n = GALLERY.start; n < GALLERY.start + GALLERY.count; n++) {
                    const src = await probe(n);
                    if (src) items.push(src);
                }
                grid.innerHTML = '';
                items.forEach((src, i) => grid.appendChild(makeThumb(src, i)));
            })();
        }

        document.addEventListener('DOMContentLoaded', () => {
            initMap();
            initCopyButtons();
            initCongratsContacts2Col();
            initGalleryAuto();
        });
    </script>
</body>

</html>